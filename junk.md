
CATS:
Treat Post-SiLU as a "MoE gate" -> These are the only indices we're going to access in up proj and down proj

TEAL:
Input sparsity on each input vector of three block matrices based on desired threshold and training

DejaVu:
Lookahead predictor on which set of indices in projection matrix will have large input product with input embedding

What we've seen:
Cosine similarity is low until around layer 20~, meaning that lookahead prediction doesn't seem like that good of an idea

(Over 10 layers)
On layer 0
Average distributions: 0.4776685929496223
Abs threshold: 0.03680419921875
positive threshold: 0.0277252197265625
Negative threshold: 0.04095458984375
On layer 1
Average distributions: 0.5062547114761962
Abs threshold: 0.04486083984375
positive threshold: 0.035308837890625
Negative threshold: 0.04949951171875
On layer 2
Average distributions: 0.41758017254427865
Abs threshold: 0.05963134765625
positive threshold: 0.0430908203125
Negative threshold: 0.06573486328125
On layer 3
Average distributions: 0.33948672705100064
Abs threshold: 0.0831298828125
positive threshold: 0.05523681640625
Negative threshold: 0.09100341796875
On layer 4
Average distributions: 0.24942221618795352
Abs threshold: 0.112548828125
positive threshold: 0.0655517578125
Negative threshold: 0.12127685546875
On layer 5
Average distributions: 0.23960840132272185
Abs threshold: 0.1263427734375
positive threshold: 0.07421875
Negative threshold: 0.135009765625
On layer 6
Average distributions: 0.2394819424004122
Abs threshold: 0.1385498046875
positive threshold: 0.08148193359375
Negative threshold: 0.1478271484375
On layer 7
Average distributions: 0.26885876364593
Abs threshold: 0.1378173828125
positive threshold: 0.08477783203125
Negative threshold: 0.14794921875
On layer 8
Average distributions: 0.27106585044622167
Abs threshold: 0.1414794921875
positive threshold: 0.0867919921875
Negative threshold: 0.1522216796875
On layer 9
Average distributions: 0.27421228982169066
Abs threshold: 0.1453857421875
positive threshold: 0.09185791015625
Negative threshold: 0.1556396484375
On layer 10
Average distributions: 0.278195157829804
Abs threshold: 0.14306640625
positive threshold: 0.09124755859375
Negative threshold: 0.1531982421875
On layer 11
Average distributions: 0.2865028688137725
Abs threshold: 0.1424560546875
positive threshold: 0.09130859375
Negative threshold: 0.153076171875
On layer 12
Average distributions: 0.321569150890008
Abs threshold: 0.1416015625
positive threshold: 0.09564208984375
Negative threshold: 0.152587890625
On layer 13
Average distributions: 0.29165784880215384
Abs threshold: 0.1517333984375
positive threshold: 0.1002197265625
Negative threshold: 0.162353515625
On layer 14
Average distributions: 0.28670847164044505
Abs threshold: 0.157470703125
positive threshold: 0.103515625
Negative threshold: 0.168212890625
On layer 15
Average distributions: 0.2432845624484811
Abs threshold: 0.1729736328125
positive threshold: 0.108642578125
Negative threshold: 0.182373046875
On layer 16
Average distributions: 0.2522971081803697
Abs threshold: 0.1685791015625
positive threshold: 0.1094970703125
Negative threshold: 0.177490234375
On layer 17
Average distributions: 0.2505232610923944
Abs threshold: 0.17236328125
positive threshold: 0.11456298828125
Negative threshold: 0.1805419921875
On layer 18
Average distributions: 0.26987359612580974
Abs threshold: 0.1646728515625
positive threshold: 0.11297607421875
Negative threshold: 0.172607421875
On layer 19
Average distributions: 0.28062133087316543
Abs threshold: 0.162841796875
positive threshold: 0.1129150390625
Negative threshold: 0.1707763671875
On layer 20
Average distributions: 0.2951477599108578
Abs threshold: 0.163330078125
positive threshold: 0.1163330078125
Negative threshold: 0.1708984375
On layer 21
Average distributions: 0.2892945393256954
Abs threshold: 0.169189453125
positive threshold: 0.12158203125
Negative threshold: 0.1761474609375
On layer 22
Average distributions: 0.3054268277644505
Abs threshold: 0.1673583984375
positive threshold: 0.12213134765625
Negative threshold: 0.1739501953125
On layer 23
Average distributions: 0.3334406113082461
Abs threshold: 0.1651611328125
positive threshold: 0.12469482421875
Negative threshold: 0.1712646484375
On layer 24
Average distributions: 0.35402760064896327
Abs threshold: 0.1644287109375
positive threshold: 0.1270751953125
Negative threshold: 0.1700439453125
On layer 25
Average distributions: 0.3511078089555257
Abs threshold: 0.16748046875
positive threshold: 0.12890625
Negative threshold: 0.1728515625
On layer 26
Average distributions: 0.34361829928865617
Abs threshold: 0.174072265625
positive threshold: 0.1336669921875
Negative threshold: 0.17919921875
On layer 27
Average distributions: 0.33130964456957546
Abs threshold: 0.1802978515625
positive threshold: 0.1378173828125
Negative threshold: 0.18505859375
On layer 28
Average distributions: 0.33180959429064394
Abs threshold: 0.187255859375
positive threshold: 0.1490478515625
Negative threshold: 0.190673828125
On layer 29
Average distributions: 0.37487068291868797
Abs threshold: 0.1884765625
positive threshold: 0.1641845703125
Negative threshold: 0.18994140625
On layer 30
Average distributions: 0.4046540829041206
Abs threshold: 0.1976318359375
positive threshold: 0.1937255859375
Negative threshold: 0.1959228515625
On layer 31
Average distributions: 0.6390251994438563
Abs threshold: 0.1932373046875
positive threshold: 0.22900390625
Negative threshold: 0.181396484375



Query
